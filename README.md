##  数据库原理与安全  


# 实验一 数据定义与查询

1.**按照下面的结构与内容建表。**

表名分别以 T、S 开头，后面是建表人的学号(以下简记为 T\*\*、S\*\* )。要求：用 create table 命令建立表 T\*\*，表中数据使用中英文皆可。

表 T\*\*:

|     |     |     |     |     |
| --- | --- | --- | --- | --- |
| Title | Author | BookID | Price | Publisher |
| 计算机原理 | 张一平 | S3092 | 20.80 | 暨南大学 |
| C 语言程序设计 | 李华  | H1298 | 15.30 | 电子工业 |
| 数据库原理 | 王家树 | D1007 | 22.70 | 高等教育 |
| 计算机网络 | 高明  | S5690 | 18.90 | 高等教育 |
| Artificial intelligence | P. Winston | D2008 | 20.80 | 电子工业 |
| Expert systems | R. Ullman | H3067 | 17.00 | 清华大学 |
| 软件工程 | 鲁延琦 | S2005 | 35.00 | 暨南大学 |
| Fortran 程序设计 | 顾学峰 | S5006 | 18.00 | 高等教育 |
| Algorithm Design | Cormen | A1001 | 45.00 | MIT |
| Advanced Database Systems | Ozsu | A1002 | 52.00 | Springer |
| Applied Cryptography | Schneier | A1003 | 38.50 | Wiley |

2.**无条件查询**

查找表T\*\*的全部信息。

3.**简单条件查询**

a.查找T\*\*表中全部书号及书名。

b.查找T\*\*表中价格在18～25元之间的书的书名。

c.查找T\*\*表中书名以A开头的书号和书名。

4.**多条件查询**

a.查找书名起始字符为A，价格小于40元的书名及价格。

b.查找书名起始字符不为A，价格大于30元的书号、书名及价格。

5.**使用函数进行查找**

a.查出价格最高的书价。

b.计算这些书籍的最高书价、最低书价及平均书价。

c.按出版社进行分组，列出各个出版社书籍的总数。

d.计算不同的书名有多少种。

6.**带排序的查询**

a.查找书名和价格，按价格从大到小的顺序排列。

b.查找出版社为 “高等教育” 的所有书籍的书名及价格，并按价格从低到高排序。

7.**连接查询**

查找价格相同的书籍对，返回每对书的书名和价格（同一书不能与自身匹配）。


# 实验二 建表、索引、视图

1.**在T\*\*表的基础上，添加一个属性：出版时间，并插入相应内容**

2.**用子查询方式建新表**

新表名以ST开头，后面为学好，新表需包括“书名”和“价格”两个属性。

3.**按“书号”建立索引**

4.**用子查询方式建立视图**

5.**删除以ST\*\*命名的表**

6.**删除建立的索引和视图**


# 实验三 插入、删除、更新

1.**在T\*\*表中插入一元祖：Image Processing, S7028, 36.00, 2022**

2.**删除书名为“Fortran 程序设计”的那个元组**

3.**删除书号以H开头的元组**

4.**把书价格调整到原来的90%**

5.**把书号以D开头的书的价格减掉2元。**

6.**把计算机原理的书号改为S1135。**

**提示：每次修改表后，可用 select 查看一下修改后表中的内容，检查是否满足要求。**

**时间：1周**


# 实验四 数据库审计、完整性验证

1.**使用触发器实现学生信息表的增删改操作审计日志记录**

2.**创建一个学生信息表students，表中包含学生ID、姓名、年龄、性别等字段。满足以下要求：**

a. 学生ID必须唯一，且不可为空；

b. 姓名不可为空；

c. 年龄只能在18到30之间，性别只能为“男”或“女”；

测试插入符合和不符合约束的数据，观察约束的效果。

3.**在创建的students表基础上，创建一个课程表courses和一个选课记录表enrollments（请自己设计），并通过外键约束实现参照完整性，确保选课记录的学生和课程信息的有效性。要求：**

1)学生只能选择已存在的课程；

2)学生ID和课程ID的组合必须唯一，防止重复选课；

3)当students表或courses表中的数据被删除或更新时，选课记录应自动级联更新或删除。


# 实验五 综合实验（选做一题）

**1.编写一个图书管理系统，要求具有以下内容：**

a)存储图书信息、采购和淘汰情况、租借情况；

b)实现图书采购、淘汰、租借功能；

c)实现图书信息、采购和淘汰、库存和租借情况查询；

d)实现图书的采购、库存、淘汰、租借情况等统计。

**2.编写一应用程序，可对数据库进行以下操作：**

1. 数据查询：无条件查、按书名查、按作者查；
   
2. 修改数据：插入、删除、更新。

**3.设计一个真实场景下的 Web 应用程序，包括一个登录界面，后台采用 SQL 数据库存储用户数据。**

1. 应用程序的登录功能需包含 SQL 注入漏洞；
   
2. 利用设计的登录漏洞，演示如何通过构造恶意输入实现 SQL 注入攻击；
   
3. 发挥你的想象力，构建一个实际且有趣的安全场景。

**4.在实际应用中，数据库通常需要支持多个用户或系统从不同主机进行访问，以满足分布式环境下的数据管理需求。请部署一个支持多主机访问的学生管理数据库。**

a)设计学生管理数据库: 学生信息表、课程信息表、选课表；

b)配置远程访问：配置用户权限，确保远程访问的安全性；

c)演示操作：从本地主机访问数据库并进行数据操作、从另一台主机远程访问数据库并进行数据操作。

**注：小组作业，选做一题，每组不超过5人，编程语言不限，鼓励使用AI编程，鼓励使用OpenGauss等国产数据库系统。每组需提交源码及对应的项目文档，请明确说明每个成员在项目中的贡献。评分会综合考虑选题难度、个人贡献、源码质量、文档内容质量以及项目的实际效果。**
